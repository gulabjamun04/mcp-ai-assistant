[tool.ruff]
target-version = "py311"
line-length = 88

[tool.ruff.lint]
select = [
    "E",     # pycodestyle errors
    "W",     # pycodestyle warnings
    "F",     # pyflakes
    "I",     # isort
    "N",     # pep8-naming
    "UP",    # pyupgrade
    "B",     # flake8-bugbear
    "SIM",   # flake8-simplify
]
ignore = [
    "E501",   # line too long — handled by black
    "B008",   # function call in argument defaults (FastAPI Depends)
    "B017",   # pytest.raises without match — acceptable in tests
    "SIM108", # ternary — not always clearer
    "SIM105", # contextlib.suppress — try/except is more explicit
    "SIM117", # nested with — less readable when collapsed
    "UP045",  # Optional -> X | None — keep Optional for readability
    "N806",   # uppercase variable in function — used for constants
    "F541",   # f-string without placeholders — sometimes intentional
]

[tool.ruff.lint.isort]
known-first-party = ["agent", "mcp_servers", "ui"]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["F401"]  # unused imports OK in tests (fixtures, re-exports)

[tool.black]
target-version = ["py311"]
line-length = 88

[tool.pytest.ini_options]
testpaths = ["tests"]
markers = [
    "integration: requires running Docker services, network, or Ollama (deselect with '-m not integration')",
]
asyncio_mode = "strict"
